#!/usr/bin/env sh

commit_msg_file="$1"
commit_msg=$(cat "$commit_msg_file")

commit_pattern="^(âœ¨|ğŸ›|ğŸ“|â™»ï¸|âœ…|ğŸ”§)\s(feat|fix|docs|style|refactor|test|chore)(\([a-z-]+\))?:\s.+$"

if ! echo "$commit_msg" | grep -E "$commit_pattern" > /dev/null; then
  echo "ğŸš« Format de commit invalide !"
  echo "âœ¨ Le message doit suivre le format : [emoji] type(scope): description"
  echo ""
  echo "Emojis autorisÃ©s :"
  echo "âœ¨ sparkles : Nouvelle fonctionnalitÃ© (feat)"
  echo "ğŸ› bug     : Correction de bug (fix)"
  echo "ğŸ“ memo    : Documentation (docs)"
  echo "â™»ï¸  recycle : Refactoring (refactor)"
  echo "âœ… check   : Tests (test)"
  echo "ğŸ”§ wrench  : Configuration/Maintenance (chore)"
  echo ""
  echo "Exemple : âœ¨ feat(auth): add login page"
  exit 1
fi

exit 0